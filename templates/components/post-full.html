{% import 'components/social-buttons.html' as Social %}
{% from 'components/comments.html' import Comment %}
{% from 'components/comments.html' import ReplyForm %}
{% from 'components/status.html' import Status %}
{% macro Post(
  _id,
  title,
  comments,
  photo='missing-image.svg',
  content='Статья ещё не написана',
  views=0,
  likes=0,
  dislikes=0,
  tags=[],
  createdAt=0
) %}
<figure id="{{ _id }}">
  <figcaption>
    {{title}}
  </figcaption>
  <!--{{kwargs.get('html_comment','')}}-->
  <img src="/static/{{photo}}">
  <section>
    {{content|markdown}}
  </section>
  <section class="tags">
    {% for tag in tags %}
    <a class="clear" href="#">#{{ tag }}</a>
    {% endfor %}
  </section>
  {{ Status('green', 'Одобрено редакцией', createdAt) }}
  <section>
    {{ Social.SocialButtons(
      views=views,
      comments=comments|length,
      likes=likes,
      dislikes=dislikes,
    ) }}
  </section>
  <section>
    {{comments|length}} комментариев
  </section>
  {{ ReplyForm(_id) }}
  <section class="comments">
    {% for comment in comments %}
    {{ Comment(loop.index|string, post_id=_id, **comment) }}
    {% endfor %}
  </section>
</figure>
{% endmacro %}